% A collection of useful latex packages and commands


%Importing various packages

\usepackage{amsmath} %Displaying equations nicely
\usepackage{amssymb} %Standard math symbols
\usepackage{framed}	 %For framing areas
\usepackage{graphicx} %For including graphics
\usepackage{latex_goon/jcapmod_goon} %Loads edited version of the jcapmod style file.
\usepackage{latex_goon/minted} %For code
\usepackage{slashed} %Dirac slash notation
\usepackage{tcolorbox}

%%%%%%%%%%%%%%%%%%%%%%%%%%  Minted %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Minted environments for python
\newminted[py]{python}{bgcolor=lightgray, fontsize=\footnotesize}
\newmintinline[pyinline]{python}{}
\newmintedfile[pyfile]{python}{bgcolor=lightgray, fontsize=\footnotesize, linenos}


%%%%%%%%%%%%%%%%%%%%%%%%%%  New commands %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\Acal}{\mathcal{A}}
\newcommand{\Bcal}{\mathcal{B}}
\newcommand{\Ccal}{\mathcal{C}}
\newcommand{\Dcal}{\mathcal{D}}
\newcommand{\Det}{\, {\rm Det} \, }
\newcommand{\Ecal}{\mathcal{E}}
\newcommand{\Fcal}{\mathcal{F}}
\newcommand{\GG}[1]{\textcolor{red}{(GG: #1)}}
\newcommand{\Gcal}{\mathcal{G}}
\newcommand{\Hcal}{\mathcal{H}}
\newcommand{\Ical}{\mathcal{I}}
\newcommand{\Jcal}{\mathcal{J}}
\newcommand{\Kcal}{\mathcal{K}}
\newcommand{\Lcal}{\mathcal{L}}
\newcommand{\MP}{M_{\rm pl}}
\newcommand{\Mcal}{\mathcal{M}}
\newcommand{\Ncal}{\mathcal{N}}
\newcommand{\Ocal}{\mathcal{O}}
\newcommand{\Pcal}{\mathcal{P}}
\newcommand{\Phivec}{\vec{\Phi}}
\newcommand{\QQ}{\mathsf{Q}}
\newcommand{\Qcalvec}{\vec{\mathcal{Q}}}
\newcommand{\Qcal}{\mathcal{Q}}
\newcommand{\Q}{\mathcal{Q}}
\newcommand{\Rcal}{\mathcal{R}}
\newcommand{\Scal}{\mathcal{S}}
\newcommand{\Tcal}{\mathcal{T}}
\newcommand{\Tr}{\, {\rm Tr} \, }
\newcommand{\Ucal}{\mathcal{U}}
\newcommand{\Vcal}{\mathcal{V}}
\newcommand{\Wcal}{\mathcal{W}}
\newcommand{\bfAcal}{\boldsymbol{\Acal}}
\newcommand{\bfA}{{\bf  A}}
\newcommand{\bfBcal}{\boldsymbol{\Bcal}}
\newcommand{\bfDcal}{\boldsymbol{\Dcal}}
\newcommand{\bfE}{{\bf  E}}
\newcommand{\bfFcal}{\boldsymbol{\Fcal}}
\newcommand{\bfF}{{\bf  F}}
\newcommand{\bfJ}{\mathbf{J}}
\newcommand{\bfOmega}{\boldsymbol{  \Omega}}
\newcommand{\bfP}{{\bf  P}}
\newcommand{\bfTheta}{\boldsymbol{  \Theta}}
\newcommand{\bfT}{{\bf  T}}
\newcommand{\bfX}{{\bf  X}}
\newcommand{\bfb}{{\bf  b}}
\newcommand{\bfepsilon}{\boldsymbol{  \epsilon}}
\newcommand{\bfe}{{\bf  e}}
\newcommand{\bfk}{{\bf  k}}
\newcommand{\bfnabla}{\boldsymbol{  \nabla}}
\newcommand{\bfomega}{\boldsymbol{  \omega}}
\newcommand{\bfp}{{\bf  p}}
\newcommand{\bfq}{{\bf  q}}
\newcommand{\bftheta}{\boldsymbol{  \theta}}
\newcommand{\bfu}{{\bf  u}}
\newcommand{\bfv}{{\bf  v}}
\newcommand{\bfx}{{\bf  x}}
\newcommand{\bfy}{{\bf  y}}
\newcommand{\bfz}{{\bf  z}}
\newcommand{\braket}[3]{\langle #1 |#2|#3\rangle}
\newcommand{\bra}[1]{\langle #1|}
\newcommand{\dcal}{D}
\newcommand{\Dr}{\, {\rm Drop} \, }
\newcommand{\LN}{\, {\rm LayerNorm} \, }
\newcommand{\e}{{\rm e}}
\newcommand{\g}{{\rm g}}
\newcommand{\h}{{\rm h}}
\newcommand{\im}{\, {\rm Im} \, }
\newcommand{\ket}[1]{|#1\rangle}
\newcommand{\mvec}{\vec{\mu}}
\newcommand{\nn}{ \nonumber\\}
\newcommand{\phibar}{\bar{\phi}}
\newcommand{\phivec}{\vec{\phi}}
\newcommand{\pivec}{\vec{\pi}}
\newcommand{\rcal}{\mathrm{R}}
\newcommand{\rd}{{\rm d}}
\newcommand{\re}{\, {\rm Re} \, }
\newcommand{\sbraket}[3]{[ #1 |#2|#3]}
\newcommand{\sbra}[1]{[#1|}
\newcommand{\sgn}{{\rm sign}}
\newcommand{\sket}[1]{|#1]}
\newcommand{\Sm}{\, {\rm Softmax} \, }
\newcommand{\tr}{\, {\rm tr} \, }
\newcommand{\ts}{\tau_{\star}}
\newcommand{\tts}{t_{\star}}


%For making symbols both bolded and mathcal-ed.  use as in \mathbfcal{A}
\DeclareMathAlphabet\mathbfcal{OMS}{cmsy}{b}{n}

%%%%%%%%%%%%%%%%%%%%%%%%%%  tikz %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Modified from Flip Tanedo's original
\usepackage{tikz}
\usetikzlibrary{arrows,shapes,patterns}
\usetikzlibrary{trees}
\usetikzlibrary{matrix,arrows} 				% For commutative diagram
											% http://www.felixl.de/commu.pdf
\usetikzlibrary{positioning}				% For "above of=" commands
\usetikzlibrary{calc,through}				% For coordinates
\usetikzlibrary{decorations.pathreplacing}  % For curly braces
\usepackage[tikz]{bclogo} 					% For cute logo boxes
\usepackage{pgffor}							% For repeating patterns
\usepackage{tkz-euclide}					% For Euclidean geometry


% Code for drawing right angles. Command was defined by \Perp[<number>]{<coord1>}{<coord2>}{<name>}[<length>] <coord1> and <coord1> are the two given points and <name> will be used to internally label the end point of the perpendicular. <number> can be any real number; if 0<=<number><=1 the perpendicular will lie inside the segment (0,5, the default value, gives the perpendicular through the middle point).  Taken from a stack exchange post

\NewDocumentCommand\Perp{O{0.5}mmmO{1cm}}{%
  \coordinate (#4) at
    ($ ($ #2!#1!#3 $) ! {sin(90)} ! 90:#3 $) {};
  \draw[thick,densely dotted,->] ($ #2!#1!#3 $) -- ($ ($ #2!#1!#3 $) ! #5 ! (#4)$);
  \coordinate (#4) at ($ ($ #2!#1!#3 $) ! #5 ! (#4)$);
}

%Defining a standard length for tikz diagrams
\newcommand{\tikzlength}{.75}
\newcommand{\tikzlengthsmall}{.3}


% Custom colors for various lines
\definecolor{gravitoncolor}{RGB}{15,15,120} %custom color for graviton lines
\definecolor{heavycolor}{rgb}{0.36, 0.54, 0.66}
\definecolor{lightbluegray}{RGB}{240,240,240}  %custom color for vertex box fill
\definecolor{lightcolor}{rgb}{0.76, 0.13, 0.28}
\definecolor{pmfieldcolor}{RGB}{120,15,15}  %custom color for pm lines

\usetikzlibrary{decorations.pathmorphing}	% For Feynman Diagrams
\usetikzlibrary{decorations.markings}



\tikzset{
%% Different kind of QFT lines
    phonon/.style={decorate, decoration={snake},line width=1pt, draw,lightcolor},
    Phi/.style={decorate, decoration={snake}, draw,gravitoncolor},
    graviton/.style={decorate, decoration={snake}, draw,gravitoncolor},
    pmfield/.style={decorate,
        decoration={coil,amplitude=4pt, segment length=5.5pt},pmfieldcolor},
    doubleline/.style={line width=2pt,style=double},
    dashedline/.style={line width=1pt,style=dashed},
%% in-in lines
	heavyarline/.style={decoration={markings,mark=at position 0.5 with {\arrow[black,line width=1.5]{stealth}}},line width=2pt,heavycolor,postaction={decorate},densely dashed},
	heavyrrline/.style={line width=2pt,heavycolor,densely dashed},
	lightarline/.style={decoration={markings,mark=at position 0.5 with {\arrow[black,line width=1.5]{stealth}}},line width=1pt,lightcolor,postaction={decorate}},
	lightrrline/.style={line width=1pt,lightcolor},
% Vertices, sources, etc
	vertex/.style={circle,draw=black,pattern=north east lines,inner sep=0pt},
	heavysource/.style={circle,draw=heavycolor,pattern=crosshatch,inner sep=0pt},
	lightsource/.style={circle,draw=lightcolor,pattern=north east lines,inner sep=0pt},
	smalldot/.style={circle,draw=black,fill=black,inner sep=0pt},
	mix/.style={circle,draw=black,inner sep=0pt},
% define crosses
cross/.style={cross out, draw=black, minimum size=.2cm, inner sep=0pt, outer sep=0pt},
}

% curves to be used in-line
\newcommand*\philine{\tikz[baseline=-0.6ex]{ \draw[line width=2pt] (-1,0) -- (1,0);}}
\newcommand*\psiline{\tikz[baseline=-0.6ex]{ \draw[graviton, line width=2pt] (-1,0) -- (1,0);}}
\newcommand*\barphiline{\tikz[baseline=-0.6ex]{ \draw[line width=1pt] (-1,0) -- (1,0);}}
\newcommand*\barpsiline{\tikz[baseline=-0.6ex]{ \draw[graviton, line width=1pt] (-1,0) -- (1,0);}}
\newcommand*\varphilinehalf{\tikz[baseline=-0.6ex]{ \draw[line width=1.2pt] (-.5,0) -- (.5,0);}}
\newcommand*\varphilinefull{\tikz[baseline=-0.6ex]{ \draw[line width=1.2pt] (-1,0) -- (1,0);}}
\newcommand*\Philine{\tikz[baseline=-0.6ex]{  \draw[blue, dotted,line width=1.2pt] (-.5,0) -- (.5,0);}}

%%%%%%%%%%%%%%%%%%%%%%%%%%  Custom environments %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% For italicizing paragraphs
\newenvironment{itquote}
  {\begin{quote}\itshape}
  {\end{quote}\ignorespacesafterend}

\newenvironment{itpars}
  {\par\itshape}
  {\par}


  \newenvironment{nicebox}[1]
    {\begin{tcolorbox}[colback=red!5!white,colframe=reddish,title=#1]    }
    {
    \end{tcolorbox}}

%%%%%%%%%%%%%%%%%%%%%%%%%%  Geometry of pdf output %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

 %%With \oddsidemargin = \evensidemargin = 0 then the total width of the page W = 2(1+x) + w, where x is the \hoffset and w is the \textwidth
\setlength{\oddsidemargin}{0.2in}
\setlength{\evensidemargin}{\oddsidemargin}
\setlength{\textwidth}{6.5in}
\setlength{\hoffset}{-.2in}
\setlength{\voffset}{-.5in}
\setlength{\topmargin}{.7in}
\setlength{\headheight}{0in}
\setlength{\headsep}{0in}
\setlength{\textheight}{8.5in}
\setlength{\marginparsep}{0in}
\setlength{\marginparwidth}{0in}
\setlength{\marginparpush}{0in}

\setlength{\parindent}{.5cm}
\setlength{\parskip}{.1cm}


%Sets how deep the table of contents goes.  Setting to 3 goes all the way to displaying subsubsections, 2 stops at subsection, etc.
\setcounter{tocdepth}{3}

%Allow equations across pages
\allowdisplaybreaks


%Add option for line spacing pmatrices
\makeatletter
\renewcommand*\env@matrix[1][\arraystretch]{%
  \edef\arraystretch{#1}%
  \hskip -\arraycolsep
  \let\@ifnextchar\new@ifnextchar
  \array{*\c@MaxMatrixCols c}}
\makeatother
